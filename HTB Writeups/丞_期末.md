# Broker靶機練習(easy)
> ## 情蒐
> 1.	nmap掃描弱點後發現有十四個開啟的port，可嘗試利用
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/86ef7b52-7bbb-4921-b1ba-fcebeeb94481)
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/88054015-72a7-4ea2-8cb3-62b7124291d6)
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/b7d509e7-5265-4ec7-a666-ef2507ad122a)
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/a6e8a971-0509-4d85-b82d-c97d5a9224dc)
>2.	先以port-80(網站)嘗試進行入侵，顯示存取該網站要求 HTTP 身份驗證
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/77fa0265-1d93-4701-9b65-d3b1ef98791b)
>3.	弱密碼嘗試admin/admin有效，發現是ActiveMQ的管理介面
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/79e85caf-1c39-4f08-97af-7c3856dc6ad0)
>4.	進到該網站一番搜索後，發現/admin/的網頁顯示版本/代理ID等重要資訊
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/18330fb3-20dd-4dce-81cb-90bb781fda3f)
---
> ## 入侵
>5.	上網搜尋後發現相關漏洞(CVE-2023-46604)，開始撰寫相關腳本
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/b10e9002-2dbc-44ce-9e35-be84b9d216ba)
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/0b695b43-89c6-4dc7-b1f7-5df81c131bf9)
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/b5ead630-5f2b-4806-b3cc-f48d316a5413)
>6.	開啟本地端http服務
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/fd16f727-4643-4652-bc67-67697307b5dc)
>7.	NC連線開啟
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/3b7d86ca-7f34-4635-9f45-a9c1aef55ee7)
>8.	運行POC
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/5c963de4-01c1-412e-b512-e812bcb03a34)
>9.	Http下載顯示200成功
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/26e1638e-9bd7-4ccb-a67c-3b7a0990450c)
>10. 成功取得shell
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/bb2e8416-fc5c-45d5-85bd-8fd8546d6e89)
>11.	 第一階段完成，取得user金鑰
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/e7434c0e-3fe3-4453-9f51-fbcf19044d2d)
---
> ## 提權
>1.	輸入sudo -l，查看自身可使用的權限
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/1d5bd2e3-671d-4bec-aa30-35531dab1524)
>2.	編寫惡意的設定檔
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/004489ba-fb7e-44dd-a19d-5bff4dbfb44b)
>3.	傳送惡意的設定檔
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/e698c053-2167-44f9-a184-d065c9d9af48)
>4.	以超級使用者權限啟動 Nginx 伺服器，並使用剛剛傳送的設定檔，進而取得root金鑰
![image](https://github.com/TwMoonBear-Arsenal/Pub-ClassWork/assets/124786200/34663ee2-240e-4e3f-8144-627c0a6c9120)
